trigger: 
  tags:
    include:
      - regression

pool:
  vmImage: 'ubuntu-latest'

stages:
- stage: 'Testing'
  jobs:
  - job: SetUp
    steps:
      - task: Gradle@2
        inputs:
          gradleWrapperFile: 'gradlew'
          workingDirectory: Gravity
          tasks: 'katalonCopyDependencies'
          publishJUnitResults: false
          javaHomeOption: 'JDKVersion'
          sonarQubeRunAnalysis: false
      
      - script: |
          cd Gravity
          ls -la
          docker run -t --rm -v "$(pwd)":/katalon/katalon/source katalonstudio/katalon katalon-execute.sh -browserType="Chrome" -retry=0 -statusDelay=15 -testSuitePath="Test Suites/$(SUITE_NAME)" -apiKey=$(API_KEY)
          cd report
          ls -la
        displayName: 'Execute Test'
     

